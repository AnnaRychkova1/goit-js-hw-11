{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41902273-a1675a4e2dad43acb6fd87e89';\n\n// https://pixabay.com/api?key=41902273-a1675a4e2dad43acb6fd87e89&q=sky&image_type=photo&orientation=horizontal&safesearch=true&per_page=9\n\nconst searchForm = document.querySelector('.form');\nconst resultContainer = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader-container');\n\nsearchForm.addEventListener('submit', handleSearch);\nhideLoader()\n\nfunction handleSearch(event) {\n  showLoader();\n  event.preventDefault();\n  resultContainer.innerHTML = \"\";\n  \n\n  const formQuery = event.currentTarget;\n  const search = formQuery.elements.query.value;\n\n  searchImageByName(search)\n    .then(data => {\n      if (!data || data.total === 0) {\n        iziToast.error({\n          title: 'ðŸ¥º Ooops...',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'center',\n        });\n        return;\n      }\n\n      const images = data.hits;\n      let markup = '';\n\n      for (const image of images) {\n        markup += createItemsMarkup(image);\n      }\n\n      resultContainer.innerHTML = markup;\n\n      var lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        title: 'ðŸ¥º Ooops...',\n        message:\n          'An error occurred while fetching images. Please try again later.',\n        position: 'center',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n      formQuery.reset();\n    }) \n}\n\nfunction showLoader() {\n  loaderContainer.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n}\n\nfunction searchImageByName(searchImage) {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchImage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 21,\n  });\n\n  return fetch(`${BASE_URL}/?${urlParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfunction createItemsMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n      <ul class=\"description\">\n        <li class=\"items-descr\">\n          <h2>Likes</h2>\n          <p>${likes}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h2>Views</h2>\n          <p>${views}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h2>Comments</h2>\n          <p>${comments}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h2>Downloads</h2>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n  </li>\n  `;\n}\n"],"names":["BASE_URL","API_KEY","searchForm","resultContainer","loaderContainer","handleSearch","hideLoader","event","showLoader","formQuery","search","searchImageByName","data","iziToast","images","markup","image","createItemsMarkup","lightbox","SimpleLightbox","error","searchImage","urlParams","response","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAW,0BACXC,EAAU,qCAIVC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAkB,SAAS,cAAc,UAAU,EACnDC,EAAkB,SAAS,cAAc,mBAAmB,EAElEF,EAAW,iBAAiB,SAAUG,CAAY,EAClDC,EAAY,EAEZ,SAASD,EAAaE,EAAO,CAC3BC,IACAD,EAAM,eAAc,EACpBJ,EAAgB,UAAY,GAG5B,MAAMM,EAAYF,EAAM,cAClBG,EAASD,EAAU,SAAS,MAAM,MAExCE,EAAkBD,CAAM,EACrB,KAAKE,GAAQ,CACZ,GAAI,CAACA,GAAQA,EAAK,QAAU,EAAG,CAC7BC,EAAS,MAAM,CACb,MAAO,cACP,QACE,2EACF,SAAU,QACpB,CAAS,EACD,MACD,CAED,MAAMC,EAASF,EAAK,KACpB,IAAIG,EAAS,GAEb,UAAWC,KAASF,EAClBC,GAAUE,EAAkBD,CAAK,EAGnCb,EAAgB,UAAYY,EAE5B,IAAIG,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GACtB,CAAO,EAEDD,EAAS,QAAO,CACtB,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CP,EAAS,MAAM,CACb,MAAO,cACP,QACE,mEACF,SAAU,QAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbP,IACAG,EAAU,MAAK,CACrB,CAAK,CACL,CAEA,SAASD,GAAa,CACpBJ,EAAgB,MAAM,QAAU,MAClC,CAEA,SAASE,GAAa,CACpBF,EAAgB,MAAM,QAAU,MAClC,CAEA,SAASO,EAAkBU,EAAa,CACtC,MAAMC,EAAY,IAAI,gBAAgB,CACpC,IAAKrB,EACL,EAAGoB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACd,CAAG,EAED,OAAO,MAAM,GAAGrB,MAAasB,GAAW,EAAE,KAAKC,GAAY,CACzD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASN,EAAkB,CACzB,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,oCAC2BL;AAAA;AAAA;AAAA,eAGrBD;AAAA,eACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAMAC;AAAA;AAAA;AAAA;AAAA,eAIAC;AAAA;AAAA;AAAA;AAAA,eAIAC;AAAA;AAAA;AAAA;AAAA,eAIAC;AAAA;AAAA;AAAA;AAAA,GAKf"}